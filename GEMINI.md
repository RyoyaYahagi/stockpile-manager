# プロジェクト固有ルール: stockpile-manager

## 1) 憲法ファイル（必読）
- **ファイルパス**: `GEMINI.md`（このファイル自体）
- このファイルは必ず最初に読み、すべて遵守すること。

## 2) 言語／ランタイム
- **言語**: HTML + Vanilla JavaScript（ES6+）
- **スタイリング**: Vanilla CSS（埋め込みまたは外部CSS）
- **推奨実行環境**: モダンブラウザ（Chrome, Firefox, Safari, Edge）
- **サーバー**: 不要（静的HTML）またはローカルサーバー（`npx serve .` など）

## 3) 主要ツール／チェック
- **フォーマッタ**: なし（手動整形、インデント2スペース）
- **Linter/型チェック**: なし
- **テスト**: ブラウザでの手動テスト
- **CIコマンド**: なし（将来的に追加可能）

> **備考**: シンプルな単一HTMLファイル構成のため、ビルド/テストツールは未導入。

## 4) ファイル参照形式
- **参照形式**: `path/to/file:123`（行番号推奨）
- 例: `index.html:250`

## 5) コーディング規約（必須）
- **インデント**: 2スペース
- **セミコロン**: 必須
- **文字列**: シングルクォート `'...'` を基本とする
- **変数宣言**: `const` を優先、必要な場合のみ `let`、`var` は禁止
- **関数**: アロー関数 `() => {}` を優先（イベントハンドラの `this` が必要な場合を除く）
- **DOM操作**: `getElementById` / `querySelector` を使用
- **日本語**: UI文字列・コメントは日本語で記述
- **HTML5**: セマンティックタグの適切な使用

## 6) エラー処理方針
- **Fail-fast**: `try-catch` で予期しないエラーをキャッチし、ユーザーにアラート表示
- **入力バリデーション**: HTML5 `required` 属性 + JavaScript での追加チェック
- **ログ方針**: `console.error` で開発者向けエラー出力（本番では削除または無効化）

## 7) テスト方針
- **テストフレームワーク**: なし（ブラウザ手動テスト）
- **テスト項目**:
  1. 備蓄品の追加・削除が正常に動作すること
  2. LocalStorageにデータが保存されること
  3. 期限表示が正しく計算されること
  4. 通知が適切に表示されること

> **将来拡張時**: Playwright/Cypress などのE2Eテストを検討

## 8) データモデル

### LocalStorage キー
- `stockpile_items`: 備蓄品リスト（JSON配列）

### アイテム構造
```javascript
{
  id: string,           // ユニークID（タイムスタンプベース）
  name: string,         // 品名
  expiry_date: string,  // 賞味期限（YYYY-MM-DD形式）
  created_at: string    // 作成日時（ISO 8601形式）
}
```

## 9) 機能制限（MVPポリシー）
以下の機能は**実装禁止**：
- ❌ ユーザー認証
- ✅ OCR（Tesseract.js使用、ブラウザ内処理のみ）
- ❌ 複数バッグ管理
- ❌ 通知カスタマイズ（7日固定）
- ❌ 家族共有
- ❌ 外部API連携
- ❌ 将来対応のための過剰設計

## 10) UI方針
- **最大画面数**: 3画面（一覧、登録モーダル、オプションで詳細）
- **レスポンシブ**: モバイルファースト
- **カラー**: シンプルな青系（#3498db）+ 警告系（赤/オレンジ）

## 11) その他の注意点
- **秘密情報**: 外部APIキーなどは含めない（LocalStorageのみ使用）
- **依存の固定**: 外部依存なし
- **ブラウザ対応**: ES6対応ブラウザのみサポート

## 12) 出力言語
- **すべての出力**: 日本語
